Description,Target,Expression
#,,annotate persons table after workplace_location model has run
Maximum Work Tour Time (minutes),_MAX_TIME_TO_WORK,999
#Auto Skim (for autoSavings ratio),,
Drive Alone Free Distance,_SOVMD_DIST,"skim_dict.get(('SOV_FREE_DISTANCE', 'MD'))"
Drive Alone Free Time,_SOVMD_TIME,"skim_dict.get(('SOV_FREE_TIME', 'MD'))"
#Transit Skim (for autoSavings ratio),,
All Transit - Initial Wait Time,_IWAIT_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_IWAIT', 'MD'))"
All Transit - Transfer Wait  Time,_XWAIT_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_XWAIT', 'MD'))"
All Transit - Walk Time,_WALK_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_WALK', 'MD'))"
All Transit - IVT Walk Time,_IVT_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_IVT', 'MD'))"
Prm Transit - Initial Wait Time,_IWAIT_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_IWAIT', 'MD'))"
Prm Transit - Transfer Wait Time,_XWAIT_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_XWAIT', 'MD'))"
Prm Transit - Walk Time,_WALK_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_WALK', 'MD'))"
Prm Transit - IVT,_IVT_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_IVT', 'MD'))"
#Transit Skim (for workersRail proportion),,
All Transit - HRT,_HRT_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_HRT', 'AM'))"
All Transit - BRT,_BRT_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_BRT', 'AM'))"
All Transit - LRT,_LRT_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_LRT', 'AM'))"
All Transit - COMRAIL,_CRL_ALL,"skim_dict.get(('WLK_ALLTRN_WLK_COMRAIL', 'AM'))"
All Transit - IVT_AM,_IVT_ALL_AM,"skim_dict.get(('WLK_ALLTRN_WLK_IVT', 'AM'))"
Prm Transit - HRT,_HRT_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_HRT', 'AM'))"
Prm Transit - BRT,_BRT_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_BRT', 'AM'))"
Prm Transit - LRT,_LRT_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_LRT', 'AM'))"
Prm Transit - COMRAIL,_CRL_PRM,"skim_dict.get(('WLK_PRMTRN_WLK_COMRAIL', 'AM'))"
Prm Transit - IVT_AM,_IVT_PRM_AM,"skim_dict.get(('WLK_PRMTRN_WLK_IVT', 'AM'))"
#Auto Time,,
Auto Time to Work,_auto_time_home_to_work,"_SOVMD_TIME.get(persons.TAZ, persons.workplace_taz)"
Auto Time from Work,_auto_time_work_to_home,"_SOVMD_TIME.get(persons.workplace_taz, persons.TAZ)"
Roundtrip Auto Time,_roundtrip_auto_time,"np.where(persons.workplace_taz>=0,_auto_time_home_to_work + _auto_time_work_to_home,0)"
# Transit Time,,
"All Transit time, outbound",_all_transitTime_hmToWrk,"_IWAIT_ALL.get(persons.TAZ, persons.workplace_taz)+_XWAIT_ALL.get(persons.TAZ, persons.workplace_taz)+_WALK_ALL.get(persons.TAZ, persons.workplace_taz)+_IVT_ALL.get(persons.TAZ, persons.workplace_taz)"
"All Transit time, return",_all_transitTime_wrkToHm,"_IWAIT_ALL.get(persons.workplace_taz, persons.TAZ)+_XWAIT_ALL.get(persons.workplace_taz, persons.TAZ)+_WALK_ALL.get(persons.workplace_taz, persons.TAZ)+_IVT_ALL.get(persons.workplace_taz, persons.TAZ)"
"Premium Transit time, outbound",_prm_transitTime_hmToWrk,"_IWAIT_PRM.get(persons.TAZ, persons.workplace_taz)+_XWAIT_PRM.get(persons.TAZ, persons.workplace_taz)+_WALK_PRM.get(persons.TAZ, persons.workplace_taz)+_IVT_PRM.get(persons.TAZ, persons.workplace_taz)"
"Premium Transit time, return",_prm_transitTime_wrkToHm,"_IWAIT_PRM.get(persons.workplace_taz, persons.TAZ)+_XWAIT_PRM.get(persons.workplace_taz, persons.TAZ)+_WALK_PRM.get(persons.workplace_taz, persons.TAZ)+_IVT_PRM.get(persons.workplace_taz, persons.TAZ)"
Best outbound transit time,_OutboundTransitTime,"np.where((_all_transitTime_hmToWrk>0)*(_all_transitTime_hmToWrk<_prm_transitTime_hmToWrk),_all_transitTime_hmToWrk, 0) + np.where((_prm_transitTime_hmToWrk>0)* (_prm_transitTime_hmToWrk<_all_transitTime_hmToWrk),_prm_transitTime_hmToWrk,0)"
Best return transit time,_ReturnTransitTime,"np.where((_all_transitTime_wrkToHm>0)*(_all_transitTime_wrkToHm<_prm_transitTime_wrkToHm),_all_transitTime_wrkToHm,0)+np.where((_prm_transitTime_wrkToHm>0)* (_prm_transitTime_wrkToHm<_all_transitTime_wrkToHm),_prm_transitTime_wrkToHm,0)"
Roundtrip Transit Time,_roundtrip_transit_time,"np.where((_OutboundTransitTime>0)*(_ReturnTransitTime>0),(_OutboundTransitTime+_ReturnTransitTime),0)"
#Walk Time (3 mph walk speed),,
Walk time home to work,_walk_time_hmToWrk,"_SOVMD_DIST.get(persons.TAZ, persons.workplace_taz)* 60/3"
Walk time work to home,_walk_time_wrkTohm,"_SOVMD_DIST.get(persons.workplace_taz, persons.TAZ)* 60/3"
Is walk available,_work_walk_available,(_walk_time_hmToWrk>0) & (_walk_time_wrkTohm>0)
Roundtrip Walk Time,_roundtrip_walk_time,"np.where(_work_walk_available,_walk_time_hmToWrk+_walk_time_wrkTohm,0)"
#Auto savings ratio/auto dependency calculation,,
Minimum between walk and transit time,_minWalkTransit,"np.where(_roundtrip_transit_time > 0, np.minimum(_roundtrip_transit_time,_roundtrip_walk_time),_roundtrip_walk_time)"
Auto savings,_autoSavings,"np.where(persons.is_worker,_minWalkTransit -_roundtrip_auto_time, 0)"
Worker auto savings,work_auto_savings_ratio,"np.where(_autoSavings<120,_autoSavings/120, 1)"
#Workers Rail Proportion,,
Premium-Only Premium IVT (excludes express bus),_PremOnlyPremIVT,"_HRT_PRM.get(persons.TAZ, persons.workplace_taz)+_BRT_PRM.get(persons.TAZ, persons.workplace_taz)+_LRT_PRM.get(persons.TAZ, persons.workplace_taz)+_CRL_PRM.get(persons.TAZ, persons.workplace_taz)"
All-Transit Premium IVT,_AllTransitPremIVT,"_HRT_ALL.get(persons.TAZ, persons.workplace_taz)+_BRT_ALL.get(persons.TAZ, persons.workplace_taz)+_LRT_ALL.get(persons.TAZ, persons.workplace_taz)+_CRL_ALL.get(persons.TAZ, persons.workplace_taz)"
Premium IVT,workers_prmTrn_ivt,"np.where((_PremOnlyPremIVT > 0) * (_PremOnlyPremIVT <999), _PremOnlyPremIVT, _AllTransitPremIVT)"
Total IVT,workers_totalTrn_ivt,"np.where((_PremOnlyPremIVT > 0) * (_PremOnlyPremIVT <999), _IVT_PRM_AM.get(persons.TAZ, persons.workplace_taz),_IVT_ALL_AM.get(persons.TAZ, persons.workplace_taz))"
#Students Rail Proportion,,
Premium-Only Premium IVT (excludes express bus),_PremOnlyPremIVT_Sch,"_HRT_PRM.get(persons.TAZ, persons.school_taz)+_BRT_PRM.get(persons.TAZ, persons.school_taz)+_LRT_PRM.get(persons.TAZ, persons.school_taz)+_CRL_PRM.get(persons.TAZ, persons.school_taz)"
All-Transit Premium IVT,_AllTransitPremIVT_Sch,"_HRT_ALL.get(persons.TAZ, persons.school_taz)+_BRT_ALL.get(persons.TAZ, persons.school_taz)+_LRT_ALL.get(persons.TAZ, persons.school_taz)+_CRL_ALL.get(persons.TAZ, persons.school_taz)"
Premium IVT,students_prmTrn_ivt,"np.where((_PremOnlyPremIVT_Sch > 0) * (_PremOnlyPremIVT_Sch <999), _PremOnlyPremIVT_Sch, _AllTransitPremIVT_Sch)"
Total IVT,students_totalTrn_ivt,"np.where((_PremOnlyPremIVT_Sch > 0) * (_PremOnlyPremIVT_Sch <999), _IVT_PRM_AM.get(persons.TAZ, persons.school_taz),_IVT_ALL_AM.get(persons.TAZ, persons.school_taz))"
